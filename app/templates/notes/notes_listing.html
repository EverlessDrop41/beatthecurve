{% extends 'layout.html' %}
{% from 'macros.html' import render_lesson_tabs %}
{% block title %}{{ lesson.lesson_name }}{% endblock %}
{% block main %}
  {{ render_lesson_tabs('notes', lesson.id) }}
  <ul>
      {% for message in get_flashed_messages() %}
        <li>{{ message }}</li>
      {% endfor %}
  </ul>
  <a href="{{ url_for("notes_bp.add_note", lessonid=lesson.id) }}" class="btn">Upload Note</a>
  <a href="{{ url_for("notes_bp.add_lecture") }}" class="btn">Add Lecture</a>
  <a href="{{ url_for("notes_bp.add_discussion", lessonid=lesson.id) }}" class="btn">Add Discussion</a>
  <table class="striped">
    <thead>
      <tr>
        <td>Lecture</td>
        <td>Number Of Files</td>
        <td>Files</td>
      </tr>
    </thead>
    <tbody>
      {% for lecture in lectures %}
        <tr>
          <td>{{ lecture.name }} - {{ lecture.year }}</td>
          <td>{{ lecture.number_of_files }}</td>
          <td>{% for note in notes[lecture.id] %}<a href="{{ url_for("notes_bp.detail", noteid=note.id) }}">{{ note.filename }}</a>, {% endfor %}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}